name: DOcs

on:
   push:
      branches:
         - main
         - with_metadata_sheet

jobs:
   build-docs:
      runs-on: ubuntu-latest

      steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4

      - name: Install dependencies
        run: | 
           python -m pip install --upgrade pip
           pip install sphinx sphinx-rtd-themes

      - name: Build Sphinx documentation
        run: |
           make html
      
      - name: Deploy to GH pages
        uses: peaceiris/actions-gh-pages@v4
        with:
           github_token: ${{ secrets.GITHUB_TOKEN }}
           publish_dir: docs/_build/html
           destination_dir: .
           keep_files: false
